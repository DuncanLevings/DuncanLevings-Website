  function extremaBy(source, keySelector, comparer) ***REMOVED***
    return new AnonymousObservable(function (o) ***REMOVED***
      var hasValue = false, lastKey = null, list = [];
      return source.subscribe(function (x) ***REMOVED***
        var comparison, key;
        try ***REMOVED***
          key = keySelector(x);
        ***REMOVED*** catch (ex) ***REMOVED***
          o.onError(ex);
          return;
        ***REMOVED***
        comparison = 0;
        if (!hasValue) ***REMOVED***
          hasValue = true;
          lastKey = key;
        ***REMOVED*** else ***REMOVED***
          try ***REMOVED***
            comparison = comparer(key, lastKey);
          ***REMOVED*** catch (ex1) ***REMOVED***
            o.onError(ex1);
            return;
          ***REMOVED***
        ***REMOVED***
        if (comparison > 0) ***REMOVED***
          lastKey = key;
          list = [];
        ***REMOVED***
        if (comparison >= 0) ***REMOVED*** list.push(x); ***REMOVED***
      ***REMOVED***, function (e) ***REMOVED*** o.onError(e); ***REMOVED***, function () ***REMOVED***
        o.onNext(list);
        o.onCompleted();
      ***REMOVED***);
    ***REMOVED***, source);
  ***REMOVED***
