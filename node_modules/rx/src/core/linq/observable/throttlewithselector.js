  /**
   * Ignores values from an observable sequence which are followed by another value within a computed throttle duration.
   * @param ***REMOVED***Function***REMOVED*** durationSelector Selector function to retrieve a sequence indicating the throttle duration for each given element.
   * @returns ***REMOVED***Observable***REMOVED*** The debounced sequence.
   */
  observableProto.debounceWithSelector = function (durationSelector) ***REMOVED***
    var source = this;
    return new AnonymousObservable(function (observer) ***REMOVED***
      var value, hasValue = false, cancelable = new SerialDisposable(), id = 0;
      var subscription = source.subscribe(function (x) ***REMOVED***
        var throttle;
        try ***REMOVED***
          throttle = durationSelector(x);
        ***REMOVED*** catch (e) ***REMOVED***
          observer.onError(e);
          return;
        ***REMOVED***

        isPromise(throttle) && (throttle = observableFromPromise(throttle));

        hasValue = true;
        value = x;
        id++;
        var currentid = id, d = new SingleAssignmentDisposable();
        cancelable.setDisposable(d);
        d.setDisposable(throttle.subscribe(function () ***REMOVED***
          hasValue && id === currentid && observer.onNext(value);
          hasValue = false;
          d.dispose();
        ***REMOVED***, observer.onError.bind(observer), function () ***REMOVED***
          hasValue && id === currentid && observer.onNext(value);
          hasValue = false;
          d.dispose();
        ***REMOVED***));
      ***REMOVED***, function (e) ***REMOVED***
        cancelable.dispose();
        observer.onError(e);
        hasValue = false;
        id++;
      ***REMOVED***, function () ***REMOVED***
        cancelable.dispose();
        hasValue && observer.onNext(value);
        observer.onCompleted();
        hasValue = false;
        id++;
      ***REMOVED***);
      return new CompositeDisposable(subscription, cancelable);
    ***REMOVED***, source);
  ***REMOVED***;

  observableProto.throttleWithSelector = function () ***REMOVED***
    //deprecate('throttleWithSelector', 'debounceWithSelector');
    return this.debounceWithSelector.apply(this, arguments);
  ***REMOVED***;
