  /*
   * Converts an existing observable sequence to an ES6 Compatible Promise
   * @example
   * var promise = Rx.Observable.return(42).toPromise(RSVP.Promise);
   *
   * // With config
   * Rx.config.Promise = RSVP.Promise;
   * var promise = Rx.Observable.return(42).toPromise();
   * @param ***REMOVED***Function***REMOVED*** [promiseCtor] The constructor of the promise. If not provided, it looks for it in Rx.config.Promise.
   * @returns ***REMOVED***Promise***REMOVED*** An ES6 compatible promise with the last value from the observable sequence.
   */
  observableProto.toPromise = function (promiseCtor) ***REMOVED***
    promiseCtor || (promiseCtor = Rx.config.Promise);
    if (!promiseCtor) ***REMOVED*** throw new TypeError('Promise type not provided nor in Rx.config.Promise'); ***REMOVED***
    var source = this;
    return new promiseCtor(function (resolve, reject) ***REMOVED***
      // No cancellation can be done
      var value, hasValue = false;
      source.subscribe(function (v) ***REMOVED***
        value = v;
        hasValue = true;
      ***REMOVED***, reject, function () ***REMOVED***
        hasValue && resolve(value);
      ***REMOVED***);
    ***REMOVED***);
  ***REMOVED***;
