  function singleOrDefaultAsync(source, hasDefault, defaultValue) ***REMOVED***
    return new AnonymousObservable(function (o) ***REMOVED***
      var value = defaultValue, seenValue = false;
      return source.subscribe(function (x) ***REMOVED***
        if (seenValue) ***REMOVED***
          o.onError(new Error('Sequence contains more than one element'));
        ***REMOVED*** else ***REMOVED***
          value = x;
          seenValue = true;
        ***REMOVED***
      ***REMOVED***, function (e) ***REMOVED*** o.onError(e); ***REMOVED***, function () ***REMOVED***
        if (!seenValue && !hasDefault) ***REMOVED***
          o.onError(new Error(sequenceContainsNoElements));
        ***REMOVED*** else ***REMOVED***
          o.onNext(value);
          o.onCompleted();
        ***REMOVED***
      ***REMOVED***);
    ***REMOVED***, source);
  ***REMOVED***
