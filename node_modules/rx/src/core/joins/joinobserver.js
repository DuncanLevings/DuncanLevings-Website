  var JoinObserver = (function (__super__) ***REMOVED***

    inherits(JoinObserver, __super__);

    function JoinObserver(source, onError) ***REMOVED***
      __super__.call(this);
      this.source = source;
      this.onError = onError;
      this.queue = [];
      this.activePlans = [];
      this.subscription = new SingleAssignmentDisposable();
      this.isDisposed = false;
    ***REMOVED***

    var JoinObserverPrototype = JoinObserver.prototype;

    JoinObserverPrototype.next = function (notification) ***REMOVED***
      if (!this.isDisposed) ***REMOVED***
        if (notification.kind === 'E') ***REMOVED***
          this.onError(notification.exception);
          return;
        ***REMOVED***
        this.queue.push(notification);
        var activePlans = this.activePlans.slice(0);
        for (var i = 0, len = activePlans.length; i < len; i++) ***REMOVED***
          activePlans[i].match();
        ***REMOVED***
      ***REMOVED***
    ***REMOVED***;

    JoinObserverPrototype.error = noop;
    JoinObserverPrototype.completed = noop;

    JoinObserverPrototype.addActivePlan = function (activePlan) ***REMOVED***
      this.activePlans.push(activePlan);
    ***REMOVED***;

    JoinObserverPrototype.subscribe = function () ***REMOVED***
      this.subscription.setDisposable(this.source.materialize().subscribe(this));
    ***REMOVED***;

    JoinObserverPrototype.removeActivePlan = function (activePlan) ***REMOVED***
      this.activePlans.splice(this.activePlans.indexOf(activePlan), 1);
      this.activePlans.length === 0 && this.dispose();
    ***REMOVED***;

    JoinObserverPrototype.dispose = function () ***REMOVED***
      __super__.prototype.dispose.call(this);
      if (!this.isDisposed) ***REMOVED***
        this.isDisposed = true;
        this.subscription.dispose();
      ***REMOVED***
    ***REMOVED***;

    return JoinObserver;
  ***REMOVED*** (AbstractObserver));
