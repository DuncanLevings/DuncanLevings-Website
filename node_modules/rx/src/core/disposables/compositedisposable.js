  /**
   * Represents a group of disposable resources that are disposed together.
   * @constructor
   */
  var CompositeDisposable = Rx.CompositeDisposable = function () ***REMOVED***
    this.disposables = argsOrArray(arguments, 0);
    this.isDisposed = false;
    this.length = this.disposables.length;
  ***REMOVED***;

  var CompositeDisposablePrototype = CompositeDisposable.prototype;

  /**
   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.
   * @param ***REMOVED***Mixed***REMOVED*** item Disposable to add.
   */
  CompositeDisposablePrototype.add = function (item) ***REMOVED***
    if (this.isDisposed) ***REMOVED***
      item.dispose();
    ***REMOVED*** else ***REMOVED***
      this.disposables.push(item);
      this.length++;
    ***REMOVED***
  ***REMOVED***;

  /**
   * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.
   * @param ***REMOVED***Mixed***REMOVED*** item Disposable to remove.
   * @returns ***REMOVED***Boolean***REMOVED*** true if found; false otherwise.
   */
  CompositeDisposablePrototype.remove = function (item) ***REMOVED***
    var shouldDispose = false;
    if (!this.isDisposed) ***REMOVED***
      var idx = this.disposables.indexOf(item);
      if (idx !== -1) ***REMOVED***
        shouldDispose = true;
        this.disposables.splice(idx, 1);
        this.length--;
        item.dispose();
      ***REMOVED***
    ***REMOVED***
    return shouldDispose;
  ***REMOVED***;

  /**
   *  Disposes all disposables in the group and removes them from the group.
   */
  CompositeDisposablePrototype.dispose = function () ***REMOVED***
    if (!this.isDisposed) ***REMOVED***
      this.isDisposed = true;
      var currentDisposables = this.disposables.slice(0);
      this.disposables = [];
      this.length = 0;

      for (var i = 0, len = currentDisposables.length; i < len; i++) ***REMOVED***
        currentDisposables[i].dispose();
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***;

  /**
   * Converts the existing CompositeDisposable to an array of disposables
   * @returns ***REMOVED***Array***REMOVED*** An array of disposable objects.
   */
  CompositeDisposablePrototype.toArray = function () ***REMOVED***
    return this.disposables.slice(0);
  ***REMOVED***;
