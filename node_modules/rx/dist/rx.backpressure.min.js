/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a)***REMOVED***var b=***REMOVED***"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1***REMOVED***,c=b[typeof window]&&window||this,d=b[typeof exports]&&exports&&!exports.nodeType&&exports,e=b[typeof module]&&module&&!module.nodeType&&module,f=(e&&e.exports===d&&d,b[typeof global]&&global);!f||f.global!==f&&f.window!==f||(c=f),"function"==typeof define&&define.amd?define(["rx"],function(b,d)***REMOVED***return a(c,d,b)***REMOVED***):"object"==typeof module&&module&&module.exports===d?module.exports=a(c,module.exports,require("./rx")):c.Rx=a(c,***REMOVED******REMOVED***,c.Rx)***REMOVED***).call(this,function(a,b,c,d)***REMOVED***function e(a,b,c)***REMOVED***return new h(function(d)***REMOVED***function e(a,b)***REMOVED***k[b]=a;var e;if(g[b]=!0,h||(h=g.every(r)))***REMOVED***if(f)return void d.onError(f);try***REMOVED***e=c.apply(null,k)***REMOVED***catch(j)***REMOVED***return void d.onError(j)***REMOVED***d.onNext(e)***REMOVED***i&&k[1]&&d.onCompleted()***REMOVED***var f,g=[!1,!1],h=!1,i=!1,k=new Array(2);return new j(a.subscribe(function(a)***REMOVED***e(a,0)***REMOVED***,function(a)***REMOVED***k[1]?d.onError(a):f=a***REMOVED***,function()***REMOVED***i=!0,k[1]&&d.onCompleted()***REMOVED***),b.subscribe(function(a)***REMOVED***e(a,1)***REMOVED***,function(a)***REMOVED***d.onError(a)***REMOVED***,function()***REMOVED***i=!0,e(!0,1)***REMOVED***))***REMOVED***,a)***REMOVED***var f=c.Observable,g=f.prototype,h=c.AnonymousObservable,i=c.internals.AbstractObserver,j=c.CompositeDisposable,k=c.Subject,l=c.Observer,m=c.Disposable.empty,n=c.Disposable.create,o=c.internals.inherits,p=c.internals.addProperties,q=c.Scheduler.timeout,r=(c.Scheduler.currentThread,c.helpers.identity);c.Pauser=function(a)***REMOVED***function b()***REMOVED***a.call(this)***REMOVED***return o(b,a),b.prototype.pause=function()***REMOVED***this.onNext(!1)***REMOVED***,b.prototype.resume=function()***REMOVED***this.onNext(!0)***REMOVED***,b***REMOVED***(k);var s=function(a)***REMOVED***function b(a)***REMOVED***var b=this.source.publish(),c=b.subscribe(a),d=m,e=this.pauser.distinctUntilChanged().subscribe(function(a)***REMOVED***a?d=b.connect():(d.dispose(),d=m)***REMOVED***);return new j(c,d,e)***REMOVED***function c(c,d)***REMOVED***this.source=c,this.controller=new k,this.pauser=d&&d.subscribe?this.controller.merge(d):this.controller,a.call(this,b,c)***REMOVED***return o(c,a),c.prototype.pause=function()***REMOVED***this.controller.onNext(!1)***REMOVED***,c.prototype.resume=function()***REMOVED***this.controller.onNext(!0)***REMOVED***,c***REMOVED***(f);g.pausable=function(a)***REMOVED***return new s(this,a)***REMOVED***;var t=function(a)***REMOVED***function b(a)***REMOVED***var b,c=[],f=e(this.source,this.pauser.distinctUntilChanged().startWith(!1),function(a,b)***REMOVED***return***REMOVED***data:a,shouldFire:b***REMOVED******REMOVED***).subscribe(function(e)***REMOVED***if(b!==d&&e.shouldFire!=b)***REMOVED***if(b=e.shouldFire,e.shouldFire)for(;c.length>0;)a.onNext(c.shift())***REMOVED***else b=e.shouldFire,e.shouldFire?a.onNext(e.data):c.push(e.data)***REMOVED***,function(b)***REMOVED***for(;c.length>0;)a.onNext(c.shift());a.onError(b)***REMOVED***,function()***REMOVED***for(;c.length>0;)a.onNext(c.shift());a.onCompleted()***REMOVED***);return f***REMOVED***function c(c,d)***REMOVED***this.source=c,this.controller=new k,this.pauser=d&&d.subscribe?this.controller.merge(d):this.controller,a.call(this,b,c)***REMOVED***return o(c,a),c.prototype.pause=function()***REMOVED***this.controller.onNext(!1)***REMOVED***,c.prototype.resume=function()***REMOVED***this.controller.onNext(!0)***REMOVED***,c***REMOVED***(f);g.pausableBuffered=function(a)***REMOVED***return new t(this,a)***REMOVED***;var u=function(a)***REMOVED***function b(a)***REMOVED***return this.source.subscribe(a)***REMOVED***function c(c,d)***REMOVED***a.call(this,b,c),this.subject=new v(d),this.source=c.multicast(this.subject).refCount()***REMOVED***return o(c,a),c.prototype.request=function(a)***REMOVED***return null==a&&(a=-1),this.subject.request(a)***REMOVED***,c***REMOVED***(f),v=function(a)***REMOVED***function b(a)***REMOVED***return this.subject.subscribe(a)***REMOVED***function c(c)***REMOVED***null==c&&(c=!0),a.call(this,b),this.subject=new k,this.enableQueue=c,this.queue=c?[]:null,this.requestedCount=0,this.requestedDisposable=m,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.controlledDisposable=m***REMOVED***return o(c,a),p(c.prototype,l,***REMOVED***onCompleted:function()***REMOVED***this.hasCompleted=!0,(!this.enableQueue||0===this.queue.length)&&this.subject.onCompleted()***REMOVED***,onError:function(a)***REMOVED***this.hasFailed=!0,this.error=a,(!this.enableQueue||0===this.queue.length)&&this.subject.onError(a)***REMOVED***,onNext:function(a)***REMOVED***var b=!1;0===this.requestedCount?this.enableQueue&&this.queue.push(a):(-1!==this.requestedCount&&0===this.requestedCount--&&this.disposeCurrentRequest(),b=!0),b&&this.subject.onNext(a)***REMOVED***,_processRequest:function(a)***REMOVED***if(this.enableQueue)***REMOVED***for(;this.queue.length>=a&&a>0;)this.subject.onNext(this.queue.shift()),a--;return 0!==this.queue.length?***REMOVED***numberOfItems:a,returnValue:!0***REMOVED***:***REMOVED***numberOfItems:a,returnValue:!1***REMOVED******REMOVED***return this.hasFailed?(this.subject.onError(this.error),this.controlledDisposable.dispose(),this.controlledDisposable=m):this.hasCompleted&&(this.subject.onCompleted(),this.controlledDisposable.dispose(),this.controlledDisposable=m),***REMOVED***numberOfItems:a,returnValue:!1***REMOVED******REMOVED***,request:function(a)***REMOVED***this.disposeCurrentRequest();var b=this,c=this._processRequest(a),a=c.numberOfItems;return c.returnValue?m:(this.requestedCount=a,this.requestedDisposable=n(function()***REMOVED***b.requestedCount=0***REMOVED***),this.requestedDisposable)***REMOVED***,disposeCurrentRequest:function()***REMOVED***this.requestedDisposable.dispose(),this.requestedDisposable=m***REMOVED******REMOVED***),c***REMOVED***(f);g.controlled=function(a)***REMOVED***return null==a&&(a=!0),new u(this,a)***REMOVED***;var w=function(a)***REMOVED***function b(a)***REMOVED***this.subscription=this.source.subscribe(new d(a,this,this.subscription));var b=this;return q.schedule(function()***REMOVED***b.source.request(1)***REMOVED***),this.subscription***REMOVED***function c(c)***REMOVED***a.call(this,b,c),this.source=c***REMOVED***o(c,a);var d=function(a)***REMOVED***function b(b,c,d)***REMOVED***a.call(this),this.observer=b,this.observable=c,this.cancel=d***REMOVED***o(b,a);var c=b.prototype;return c.completed=function()***REMOVED***this.observer.onCompleted(),this.dispose()***REMOVED***,c.error=function(a)***REMOVED***this.observer.onError(a),this.dispose()***REMOVED***,c.next=function(a)***REMOVED***this.observer.onNext(a);var b=this;q.schedule(function()***REMOVED***b.observable.source.request(1)***REMOVED***)***REMOVED***,c.dispose=function()***REMOVED***this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),a.prototype.dispose.call(this)***REMOVED***,b***REMOVED***(i);return c***REMOVED***(f);u.prototype.stopAndWait=function()***REMOVED***return new w(this)***REMOVED***;var x=function(a)***REMOVED***function b(a)***REMOVED***this.subscription=this.source.subscribe(new d(a,this,this.subscription));var b=this;return q.schedule(function()***REMOVED***b.source.request(b.windowSize)***REMOVED***),this.subscription***REMOVED***function c(c,d)***REMOVED***a.call(this,b,c),this.source=c,this.windowSize=d***REMOVED***o(c,a);var d=function(a)***REMOVED***function b(a,b,c)***REMOVED***this.observer=a,this.observable=b,this.cancel=c,this.received=0***REMOVED***o(b,a);var c=b.prototype;return c.completed=function()***REMOVED***this.observer.onCompleted(),this.dispose()***REMOVED***,c.error=function(a)***REMOVED***this.observer.onError(a),this.dispose()***REMOVED***,c.next=function(a)***REMOVED***if(this.observer.onNext(a),this.received=++this.received%this.observable.windowSize,0===this.received)***REMOVED***var b=this;q.schedule(function()***REMOVED***b.observable.source.request(b.observable.windowSize)***REMOVED***)***REMOVED******REMOVED***,c.dispose=function()***REMOVED***this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),a.prototype.dispose.call(this)***REMOVED***,b***REMOVED***(i);return c***REMOVED***(f);return u.prototype.windowed=function(a)***REMOVED***return new x(this,a)***REMOVED***,c***REMOVED***);
//# sourceMappingURL=rx.backpressure.map