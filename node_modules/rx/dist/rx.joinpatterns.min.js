/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a)***REMOVED***var b=***REMOVED***"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1***REMOVED***,c=b[typeof window]&&window||this,d=b[typeof exports]&&exports&&!exports.nodeType&&exports,e=b[typeof module]&&module&&!module.nodeType&&module,f=(e&&e.exports===d&&d,b[typeof global]&&global);!f||f.global!==f&&f.window!==f||(c=f),"function"==typeof define&&define.amd?define(["rx"],function(b,d)***REMOVED***return a(c,d,b)***REMOVED***):"object"==typeof module&&module&&module.exports===d?module.exports=a(c,module.exports,require("./rx")):c.Rx=a(c,***REMOVED******REMOVED***,c.Rx)***REMOVED***).call(this,function(a,b,c,d)***REMOVED***function e(a,b)***REMOVED***return 1===a.length&&Array.isArray(a[b])?a[b]:t.call(a)***REMOVED***function f(a)***REMOVED***this.patterns=a***REMOVED***function g(a,b)***REMOVED***this.expression=a,this.selector=b***REMOVED***function h(a,b,c)***REMOVED***var d=a.get(b);if(!d)***REMOVED***var e=new v(b,c);return a.set(b,e),e***REMOVED***return d***REMOVED***function i(a,b,c)***REMOVED***this.joinObserverArray=a,this.onNext=b,this.onCompleted=c,this.joinObservers=new u;for(var d=0,e=this.joinObserverArray.length;e>d;d++)***REMOVED***var f=this.joinObserverArray[d];this.joinObservers.set(f,f)***REMOVED******REMOVED***var j=c.Observable,k=j.prototype,l=c.AnonymousObservable,m=j.throwException,n=c.Observer.create,o=c.SingleAssignmentDisposable,p=c.CompositeDisposable,q=c.internals.AbstractObserver,r=c.helpers.noop,s=(c.internals.isEqual,c.internals.inherits),t=(c.internals.Enumerable,c.internals.Enumerator,c.iterator,c.doneEnumerator,Array.prototype.slice),u=a.Map||function()***REMOVED***function a()***REMOVED***this._keys=[],this._values=[]***REMOVED***return a.prototype.get=function(a)***REMOVED***var b=this._keys.indexOf(a);return-1!==b?this._values[b]:d***REMOVED***,a.prototype.set=function(a,b)***REMOVED***var c=this._keys.indexOf(a);-1!==c&&(this._values[c]=b),this._values[this._keys.push(a)-1]=b***REMOVED***,a.prototype.forEach=function(a,b)***REMOVED***for(var c=0,d=this._keys.length;d>c;c++)a.call(b,this._values[c],this._keys[c])***REMOVED***,a***REMOVED***();f.prototype.and=function(a)***REMOVED***return new f(this.patterns.concat(a))***REMOVED***,f.prototype.thenDo=function(a)***REMOVED***return new g(this,a)***REMOVED***,g.prototype.activate=function(a,b,c)***REMOVED***for(var d=this,e=[],f=0,g=this.expression.patterns.length;g>f;f++)e.push(h(a,this.expression.patterns[f],b.onError.bind(b)));var j=new i(e,function()***REMOVED***var a;try***REMOVED***a=d.selector.apply(d,arguments)***REMOVED***catch(c)***REMOVED***return void b.onError(c)***REMOVED***b.onNext(a)***REMOVED***,function()***REMOVED***for(var a=0,b=e.length;b>a;a++)e[a].removeActivePlan(j);c(j)***REMOVED***);for(f=0,g=e.length;g>f;f++)e[f].addActivePlan(j);return j***REMOVED***,i.prototype.dequeue=function()***REMOVED***this.joinObservers.forEach(function(a)***REMOVED***a.queue.shift()***REMOVED***)***REMOVED***,i.prototype.match=function()***REMOVED***var a,b,c=!0;for(a=0,b=this.joinObserverArray.length;b>a;a++)if(0===this.joinObserverArray[a].queue.length)***REMOVED***c=!1;break***REMOVED***if(c)***REMOVED***var d=[],e=!1;for(a=0,b=this.joinObserverArray.length;b>a;a++)d.push(this.joinObserverArray[a].queue[0]),"C"===this.joinObserverArray[a].queue[0].kind&&(e=!0);if(e)this.onCompleted();else***REMOVED***this.dequeue();var f=[];for(a=0,b=d.length;a<d.length;a++)f.push(d[a].value);this.onNext.apply(this,f)***REMOVED******REMOVED******REMOVED***;var v=function(a)***REMOVED***function b(b,c)***REMOVED***a.call(this),this.source=b,this.onError=c,this.queue=[],this.activePlans=[],this.subscription=new o,this.isDisposed=!1***REMOVED***s(b,a);var c=b.prototype;return c.next=function(a)***REMOVED***if(!this.isDisposed)***REMOVED***if("E"===a.kind)return void this.onError(a.exception);this.queue.push(a);for(var b=this.activePlans.slice(0),c=0,d=b.length;d>c;c++)b[c].match()***REMOVED******REMOVED***,c.error=r,c.completed=r,c.addActivePlan=function(a)***REMOVED***this.activePlans.push(a)***REMOVED***,c.subscribe=function()***REMOVED***this.subscription.setDisposable(this.source.materialize().subscribe(this))***REMOVED***,c.removeActivePlan=function(a)***REMOVED***this.activePlans.splice(this.activePlans.indexOf(a),1),0===this.activePlans.length&&this.dispose()***REMOVED***,c.dispose=function()***REMOVED***a.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())***REMOVED***,b***REMOVED***(q);return k.and=function(a)***REMOVED***return new f([this,a])***REMOVED***,k.thenDo=function(a)***REMOVED***return new f([this]).thenDo(a)***REMOVED***,j.when=function()***REMOVED***var a=e(arguments,0);return new l(function(b)***REMOVED***var c=[],d=new u,e=n(b.onNext.bind(b),function(a)***REMOVED***d.forEach(function(b)***REMOVED***b.onError(a)***REMOVED***),b.onError(a)***REMOVED***,b.onCompleted.bind(b));try***REMOVED***for(var f=0,g=a.length;g>f;f++)c.push(a[f].activate(d,e,function(a)***REMOVED***var d=c.indexOf(a);c.splice(d,1),0===c.length&&b.onCompleted()***REMOVED***))***REMOVED***catch(h)***REMOVED***m(h).subscribe(b)***REMOVED***var i=new p;return d.forEach(function(a)***REMOVED***a.subscribe(),i.add(a)***REMOVED***),i***REMOVED***)***REMOVED***,c***REMOVED***);
//# sourceMappingURL=rx.joinpatterns.map