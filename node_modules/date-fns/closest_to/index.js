var parse = require('../parse/index.js')

/**
 * @category Common Helpers
 * @summary Return a date from the array closest to the given date.
 *
 * @description
 * Return a date from the array closest to the given date.
 *
 * @param ***REMOVED***Date|String|Number***REMOVED*** dateToCompare - the date to compare with
 * @param ***REMOVED***Date[]|String[]|Number[]***REMOVED*** datesArray - the array to search
 * @returns ***REMOVED***Date***REMOVED*** the date from the array closest to the given date
 * @throws ***REMOVED***TypeError***REMOVED*** the second argument must be an instance of Array
 *
 * @example
 * // Which date is closer to 6 September 2015: 1 January 2000 or 1 January 2030?
 * var dateToCompare = new Date(2015, 8, 6)
 * var result = closestTo(dateToCompare, [
 *   new Date(2000, 0, 1),
 *   new Date(2030, 0, 1)
 * ])
 * //=> Tue Jan 01 2030 00:00:00
 */
function closestTo (dirtyDateToCompare, dirtyDatesArray) ***REMOVED***
  if (!(dirtyDatesArray instanceof Array)) ***REMOVED***
    throw new TypeError(toString.call(dirtyDatesArray) + ' is not an instance of Array')
  ***REMOVED***

  var dateToCompare = parse(dirtyDateToCompare)
  var timeToCompare = dateToCompare.getTime()

  var result
  var minDistance

  dirtyDatesArray.forEach(function (dirtyDate) ***REMOVED***
    var currentDate = parse(dirtyDate)
    var distance = Math.abs(timeToCompare - currentDate.getTime())
    if (result === undefined || distance < minDistance) ***REMOVED***
      result = currentDate
      minDistance = distance
    ***REMOVED***
  ***REMOVED***)

  return result
***REMOVED***

module.exports = closestTo
