'use strict';

const stringReplaceAll = (string, substring, replacer) => ***REMOVED***
	let index = string.indexOf(substring);
	if (index === -1) ***REMOVED***
		return string;
	***REMOVED***

	const substringLength = substring.length;
	let endIndex = 0;
	let returnValue = '';
	do ***REMOVED***
		returnValue += string.substr(endIndex, index - endIndex) + substring + replacer;
		endIndex = index + substringLength;
		index = string.indexOf(substring, endIndex);
	***REMOVED*** while (index !== -1);

	returnValue += string.substr(endIndex);
	return returnValue;
***REMOVED***;

const stringEncaseCRLFWithFirstIndex = (string, prefix, postfix, index) => ***REMOVED***
	let endIndex = 0;
	let returnValue = '';
	do ***REMOVED***
		const gotCR = string[index - 1] === '\r';
		returnValue += string.substr(endIndex, (gotCR ? index - 1 : index) - endIndex) + prefix + (gotCR ? '\r\n' : '\n') + postfix;
		endIndex = index + 1;
		index = string.indexOf('\n', endIndex);
	***REMOVED*** while (index !== -1);

	returnValue += string.substr(endIndex);
	return returnValue;
***REMOVED***;

module.exports = ***REMOVED***
	stringReplaceAll,
	stringEncaseCRLFWithFirstIndex
***REMOVED***;
