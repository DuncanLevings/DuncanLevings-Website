'use strict';
const ***REMOVED***htmlEscape***REMOVED*** = require('escape-goat');

module.exports = (template, data) => ***REMOVED***
	if (typeof template !== 'string') ***REMOVED***
		throw new TypeError(`Expected a \`string\` in the first argument, got \`$***REMOVED***typeof template***REMOVED***\``);
	***REMOVED***

	if (typeof data !== 'object') ***REMOVED***
		throw new TypeError(`Expected an \`object\` or \`Array\` in the second argument, got \`$***REMOVED***typeof data***REMOVED***\``);
	***REMOVED***

	const doubleBraceRegex = /***REMOVED******REMOVED***(.*?)***REMOVED******REMOVED***/g;

	if (doubleBraceRegex.test(template)) ***REMOVED***
		template = template.replace(doubleBraceRegex, (_, key) => ***REMOVED***
			let result = data;

			for (const property of key.split('.')) ***REMOVED***
				result = result ? result[property] : '';
			***REMOVED***

			return htmlEscape(String(result));
		***REMOVED***);
	***REMOVED***

	const braceRegex = /***REMOVED***(.*?)***REMOVED***/g;

	return template.replace(braceRegex, (_, key) => ***REMOVED***
		let result = data;

		for (const property of key.split('.')) ***REMOVED***
			result = result ? result[property] : '';
		***REMOVED***

		return String(result);
	***REMOVED***);
***REMOVED***;
