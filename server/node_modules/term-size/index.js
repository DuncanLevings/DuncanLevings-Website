'use strict';
const ***REMOVED***execFileSync***REMOVED*** = require('child_process');
const path = require('path');

const exec = (command, arguments_, shell) => execFileSync(command, arguments_, ***REMOVED***encoding: 'utf8', shell***REMOVED***).trim();

const create = (columns, rows) => (***REMOVED***
	columns: parseInt(columns, 10),
	rows: parseInt(rows, 10)
***REMOVED***);

module.exports = () => ***REMOVED***
	const ***REMOVED***env, stdout, stderr***REMOVED*** = process;

	if (stdout && stdout.columns && stdout.rows) ***REMOVED***
		return create(stdout.columns, stdout.rows);
	***REMOVED***

	if (stderr && stderr.columns && stderr.rows) ***REMOVED***
		return create(stderr.columns, stderr.rows);
	***REMOVED***

	// These values are static, so not the first choice
	if (env.COLUMNS && env.LINES) ***REMOVED***
		return create(env.COLUMNS, env.LINES);
	***REMOVED***

	if (process.platform === 'win32') ***REMOVED***
		try ***REMOVED***
			// Binary: https://github.com/sindresorhus/win-term-size
			const size = exec(path.join(__dirname, 'vendor/windows/term-size.exe')).split(/\r?\n/);

			if (size.length === 2) ***REMOVED***
				return create(size[0], size[1]);
			***REMOVED***
		***REMOVED*** catch (_) ***REMOVED******REMOVED***
	***REMOVED*** else ***REMOVED***
		if (process.platform === 'darwin') ***REMOVED***
			try ***REMOVED***
				// Binary: https://github.com/sindresorhus/macos-term-size
				const size = exec(path.join(__dirname, 'vendor/macos/term-size'), [], true).split(/\r?\n/);

				if (size.length === 2) ***REMOVED***
					return create(size[0], size[1]);
				***REMOVED***
			***REMOVED*** catch (_) ***REMOVED******REMOVED***
		***REMOVED***

		// `resize` is preferred as it works even when all file descriptors are redirected
		// https://linux.die.net/man/1/resize
		try ***REMOVED***
			const size = exec('resize', ['-u']).match(/\d+/g);

			if (size.length === 2) ***REMOVED***
				return create(size[0], size[1]);
			***REMOVED***
		***REMOVED*** catch (_) ***REMOVED******REMOVED***

		if (process.env.TERM) ***REMOVED***
			try ***REMOVED***
				const columns = exec('tput', ['cols']);
				const rows = exec('tput', ['lines']);

				if (columns && rows) ***REMOVED***
					return create(columns, rows);
				***REMOVED***
			***REMOVED*** catch (_) ***REMOVED******REMOVED***
		***REMOVED***
	***REMOVED***

	return create(80, 24);
***REMOVED***;
